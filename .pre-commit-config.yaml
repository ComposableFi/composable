fail_fast: true
repos:
  - repo: local
    hooks:
      ########## Clearing House ##########
      - id: clearing-house::cargo-fmt
        name: clearing-house::cargo-fmt
        entry: cargo +nightly fmt --check -p pallet-clearing-house
        language: system
        pass_filenames: false
        stages: [commit, push, manual]
        files: ^frame/clearing-house/
        types: [rust]
      - id: clearing-house::cargo-clippy
        name: clearing-house::cargo-clippy
        entry: cargo +nightly clippy --all-targets --no-deps -p pallet-clearing-house
        language: system
        pass_filenames: false
        stages: [push, manual]
        files: ^frame/(clearing-house/|composable-traits/src/(clearing_house.rs|vamm.rs))
        types: [rust]
      - id: clearing-house::cargo-test
        name: clearing-house::cargo-test
        entry: cargo +nightly nextest run --fail-fast --all-features --tests -p pallet-clearing-house
        language: system
        pass_filenames: false
        files: ^frame/(clearing-house/|composable-traits/src/(clearing_house.rs|vamm.rs))
        types: [rust]
        stages: [push, manual]

        ########## VAMM ##########
      - id: vamm::cargo-fmt
        name: vamm::cargo-fmt
        entry: cargo +nightly fmt --check -p pallet-vamm
        language: system
        pass_filenames: false
        files: ^frame/vamm/
        types: [rust]
        stages: [push, manual]
      - id: vamm::cargo-check
        name: vamm::cargo-check
        entry: cargo +nightly check --all-targets -p pallet-vamm
        language: system
        pass_filenames: false
        files: ^frame/vamm/
        types: [rust]
        stages: [push, manual]
      - id: vamm::cargo-test
        name: vamm::cargo-test
        entry: cargo +nightly nextest run --fail-fast --all-features --tests -p pallet-vamm
        language: system
        pass_filenames: false
        files: ^frame/vamm/
        types: [rust]
        stages: [push, manual]
      - id: vamm::cargo-clippy
        name: vamm::cargo-clippy
        entry: cargo +nightly clippy --all-targets --no-deps -p pallet-vamm
        language: system
        pass_filenames: false
        files: ^frame/vamm/
        types: [rust]
        stages: [manual]
      - id: vamm::cargo-doc
        name: vamm::cargo-doc
        entry: cargo +nightly doc --no-deps -p pallet-vamm
        language: system
        pass_filenames: false
        files: ^frame/vamm/
        types: [rust]
        stages: [manual]

        ########## Composable Traits ##########
      - id: composable-traits::cargo-fmt
        name: composable-traits::cargo-fmt
        entry: cargo +nightly fmt --check -p composable-traits
        language: system
        pass_filenames: false
        files: ^frame/composable-traits/
        types: [rust]
        stages: [push, manual]
      - id: composable-traits::cargo-check
        name: composable-traits::cargo-check
        entry: cargo +nightly check --all-targets -p composable-traits
        language: system
        pass_filenames: false
        files: ^frame/composable-traits/
        types: [rust]
        stages: [push, manual]
      - id: composable-traits::cargo-test
        name: composable-traits::cargo-test
        entry: cargo +nightly nextest run --fail-fast --all-features --tests -p composable-traits
        language: system
        pass_filenames: false
        files: ^frame/composable-traits/
        types: [rust]
        stages: [push, manual]
      - id: composable-traits::cargo-clippy
        name: composable-traits::cargo-clippy
        entry: cargo +nightly clippy --all-targets --no-deps -p composable-traits
        language: system
        pass_filenames: false
        files: ^frame/composable-traits/
        types: [rust]
        stages: [manual]
      - id: composable-traits::cargo-doc
        name: composable-traits::cargo-doc
        entry: cargo +nightly doc --no-deps -p composable-traits
        language: system
        pass_filenames: false
        files: ^frame/composable-traits/
        types: [rust]
        stages: [manual]

        ########## Composable Maths ##########
      - id: composable-maths::cargo-fmt
        name: composable-maths::cargo-fmt
        entry: cargo +nightly fmt --check -p composable-maths
        language: system
        pass_filenames: false
        files: ^frame/composable-maths/
        types: [rust]
        stages: [push, manual]
      - id: composable-maths::cargo-check
        name: composable-maths::cargo-check
        entry: cargo +nightly check --all-targets -p composable-maths
        language: system
        pass_filenames: false
        files: ^frame/composable-maths/
        types: [rust]
        stages: [push, manual]
      - id: composable-maths::cargo-test
        name: composable-maths::cargo-test
        entry: cargo +nightly nextest run --fail-fast --all-features --tests -p composable-maths
        language: system
        pass_filenames: false
        files: ^frame/composable-maths/
        types: [rust]
        stages: [push, manual]
      - id: composable-maths::cargo-clippy
        name: composable-maths::cargo-clippy
        entry: cargo +nightly clippy --all-targets --no-deps -p composable-maths
        language: system
        pass_filenames: false
        files: ^frame/composable-maths/
        types: [rust]
        stages: [manual]
      - id: composable-maths::cargo-doc
        name: composable-maths::cargo-doc
        entry: cargo +nightly doc --no-deps -p composable-maths
        language: system
        pass_filenames: false
        files: ^frame/composable-maths/
        types: [rust]
        stages: [manual]

  - repo: https://github.com/alessandrojcm/commitlint-pre-commit-hook
    rev: v8.0.0
    hooks:
      - id: commitlint
        stages: [commit-msg]
        additional_dependencies: ["@commitlint/config-conventional"]
