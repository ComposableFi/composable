syntax = "proto3";

package xcvm;

message Program {
  Instructions instructions = 1;
  uint32 instruction_pointer = 2;
}

message Instructions {
  repeated Instruction instructions = 1;
}

message Instruction {
  oneof instruction {
    Transfer transfer = 1;
    Bridge bridge = 2;
    Call call = 3;
    Spawn spawn = 4;
  }
}

message Transfer {
  Account destination = 1;
  // (Asset, Amount)
  map<uint32, U128> assets = 2;
}

message Bridge {
  uint32 network = 1;
  // (Asset, Amount)
  map<uint32, U128> assets = 2;
}

message Call {
  bytes payload = 1;
}

message Spawn {
  uint32 network = 1;
  repeated Instruction program = 2;
}

message Account {
  bytes addressed = 2;
}

message U128 {
  bytes bytes = 1;
}

message U256 {
  bytes bytes = 1;
}
