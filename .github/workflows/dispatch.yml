name: Workflow Dispatcher
on: 
  push:
    branches:
        - github-workflows-dispatch
    
       

env: 
  ROOT_KEY: ${{ secrets.ROOT_KEY }}

jobs:
  run-simnode:
    runs-on: 
        - self-hosted
        - linux
        - X64
        - sre

    steps:
    - name: Run Simnode
      uses: benc-uk/workflow-dispatch@v1
      with:
        workflow: simnode
        token: ${{ secrets.COMPOSABLE_GITHUB_TOKEN }}
        inputs: '{ "branch": "Enter the branch you want to run simnode against", "default": releases }'


  run-benchmark:
    runs-on: 
        - self-hosted
        - linux
        - X64
        - bmark

    steps:
    - name: Run Simnode
      uses: benc-uk/workflow-dispatch@v1
      with:
        workflow: simnode
        token: ${{ secrets.COMPOSABLE_GITHUB_TOKEN }}
        inputs: '{ "branch": "Enter the branch you want to run simnode against", "default": releases }'

    - name: Run Benchmark
      uses: benc-uk/workflow-dispatch@v1
      with:
        workflow: benchmark
        token: ${{ secrets.COMPOSABLE_GITHUB_TOKEN }}
        inputs: '{ "message": "Enter the branch you want to run simnode against", "default": releases }'




